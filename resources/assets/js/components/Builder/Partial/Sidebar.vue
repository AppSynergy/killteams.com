<template>
    <div class="vue-builder-partial-sidebar">

        <span class="card-header h3">Choose Your Fighters</span>

        <div class="card-body"
            v-if="'sandbox' == gameMode">
            <select class="custom-select custom-select-sm"
                v-model="selectedFactionId">
                <option v-for="faction in factions"
                    :value="faction.id">{{ faction.name }}
                </option>
            </select>
        </div>

        <div class="card-body pt-3"
            v-if="faction != undefined">
            <div class=""
                v-for="datasheet in faction.datasheets">

                <div class="h5 mr-3 font-weight-bold d-block">
                    {{ datasheet.name }}
                </div>

                <button class="btn btn-primary btn-sm mr-2 mb-2"
                    :dusk="'add ' + mini.name"
                    v-on:click="addFighter(mini)"
                    v-for="mini in datasheet.miniatures"
                    :disabled="false">
                    {{ mini.name }}
                </button>

            </div>
        </div>

        <div class="card-footer">
            <router-link dusk="back"
                :to="'/' + gameMode + '/choosefaction'">
                Back to faction select
            </router-link>
            <router-link dusk="home" to="/">
                Home
            </router-link>
        </div>

    </div>
</template>

<script>
import FactionResource from '../../../mixins/factionResource.js'
export default {
    props: [
        'factionId', 'gameMode',
    ],
    mixins: [
        FactionResource
    ],
    computed: {
        faction() {
            return _.find(this.factions, { id: this.selectedFactionId })
        }
    },
    data() {
        return {
            selectedFactionId: parseInt(this.factionId, 10),
        }
    },
    methods: {

    }
}
</script>
